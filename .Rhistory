library(foreign)
getwd()
setwd("Dropbox/cursos2/cuanti/cse/shinyCuanti")
endis=read.spss("../data/endis/BASE ENTREVISTADA ENDIS 2018 TERCEROS.sav")
endis
endis=read.spss("../data/endis/BASE ENTREVISTADA ENDIS 2018 TERCEROS.sav",to.data.frame =T)
endis=read_sav("../data/endis/BASE ENTREVISTADA ENDIS 2018 TERCEROS.sav",to.data.frame =T)
library(haven)
View(endis)
endis=read_sav("../data/endis/BASE ENTREVISTADA ENDIS 2018 TERCEROS.sav")
View(endis)
codes=c("Si"=1,"No"=2,"Ns/Nc"=9)
codes
?as_factor
endis=as_factor(endis)
View(endis)
View(endis)
View(endis)
endis$E557
endis=read_sav("../data/endis/BASE PERSONAS ENDIS 2018 TERCEROS")
endis=read_sav("../data/endis/BASE PERSONAS ENDIS 2018 TERCEROS.sav")
endis=as_factor(endis)
endis$PER_DISCAPACIDAD
endis$PER_FECHANAC
endis=read_sav("../data/endis/BASE NIÑOS ENDIS 2018 TERCEROS.sav")
endis=as_factor(endis)
endis$Edad_meses
endis$Edad_meses+1
endis$E238
endis$IH10
endis$IH10_1
endis$E239
endis=read_sav("../data/endis/BASE NIÑOS ENDIS 2018 TERCEROS.sav")
library(haven)
endis=read_sav("../data/endis/BASE NIÑOS ENDIS 2018 TERCEROS.sav")
endis=as_factor(endis)
endis$NA3
variables = c("Edad_meses","Region","E27","PER_DISCAPACIDAD","E238",
"E239","IH10_1","IH11","IH4_NE_1","IH4_NE_2","IH4_NE_3","IH4_NE_11","E559","E559_1",
"E559_2","E560","E560_1","E560_2","E561","E59","E246","NA3","IH22","IH24","IH26","IH28","IH30_NV","IH32",
"EM1","EM2_NE","EM3_NE","EM7","EM5_NE","EM12","EM14","EM15","EM7_NE","EM8_NE_1","EM8_NE_2","EM8_NE_3",
"EM20_1","EM20_1_1","EM20_2","EM20_2_1","EM20_1_2","EM22","EM23","EM26_1","EM26_1_1","EM26_2","EM26_2_1","EM26_3","EM26_3_1","EM26_4","EM26_4_1","EM27","EM9_NE","EM10_NE_7","EM11_NE",
"SI1_NE","SI17","SI2_NE","SI2_NE_1","SI3_NE","SI4_NE","SI4_NE_1","SI19","SI19_1","SI19_2","SI19_3","SI19_4","SI19_5","SI19_6","SI19_7","SS1_NE","SS2_NE","SS3_NE",
"ANTRO","MA1_1","MA2_1","MA3_1","MA8","MA10","MA10_B","MA10_C","MA10_1","MA10_2","MA10_3","SI6","SI7","SI8","SI19_NEE","SI20_NE_1","SI20_NE_1_1","SI12",
"AL2","AL3","AL4","AL5_1","AL8_NV","AL9","AL11_NV","AL15","AL16","AL17","AL18","AL18_1","AL18_2","AL18_3","AL18_4","AL18_5","AL18_5_1","AL23_NV","AL24","AL26_NV",
"PC20","PC2_NE","PC2_NE_A","PC2_NE_A_A","PC2_NE_A_B","PC2_NE_A_X","PC2_NE_A_Y","PC2_NE_B_A","PC2_NE_B_B","PC2_NE_B_X","PC2_NE_B_Y","PC2_NE_C_A","PC2_NE_C_B","PC2_NE_C_X","PC2_NE_C_Y","PC2_NE_D_A","PC2_NE_D_B","PC2_NE_D_X","PC2_NE_D_Y","PC2_NE_E_A","PC2_NE_E_B","PC2_NE_E_X","PC2_NE_E_Y","PC2_NE_F_A","PC2_NE_F_B","PC2_NE_F_X","PC2_NE_F_Y","PC3_NE","PC3_NE_1","PC3_NE_2","PC8_NE","PC8_NE_1","PC8_NE_2","PC6_NE","PC6_NE_1","PC6_NE_2","EP1_NE","EP2_NE","EP3_NE","CNV_edadm")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
library(shiny)
library(ggplot2)
library(htmlTable)
library(dplyr)
load("./data/censo.RData")
load("./data/darkTriad.RData")
load("./data/serce.RData")
load("./data/latino.RData")
load("./data/encuesta.RData")
load("./data/miniBase.RData")
load("./data/expeCuna.RData")
load("./data/inteligencia.RData")
load("./data/wealth.RData")
load("./data/endis.RData")
?dnorm
runApp()
runApp()
runApp()
runApp()
p_h = ggplot(df,aes(x=nombre)) + geom_histogram() + labs(x = nombre,
y = "frecuencia",
title = titulo)
df
p_h = ggplot(censo,aes(x=nombre)) + geom_histogram() + labs(x = nombre,
y = "frecuencia",
title = titulo)
titulo = "c"
p_h = ggplot(censo,aes(x=nombre)) + geom_histogram() + labs(x = nombre,
y = "frecuencia",
title = titulo)
show(p_h)
ggplot(censo,aes(x=nombre)) + geom_histogram() + labs(x = nombre,
y = "frecuencia",
title = titulo)
nombre
censo
censo$nombre
censo
nombre = "Edad"
censo$nombre
runApp()
runApp()
runApp()
runApp()
scale_fill_categorical
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?geom_density
runApp()
x=c(2,3,4,2,5,2,5)
runApp()
x
dnorm(x,mean(d),sd(d))
dnorm(x,mean(x),sd(x))
dnorm(x,mean(x),sd(x))
x
rnorm(x,mean(d),sd(d))
d
d = c(2,4,5,2,3,5)
bins <- seq(min(d,na.rm=T), max(d,na.rm=T), length.out = input$bins + 1)
bins <- seq(min(d,na.rm=T), max(d,na.rm=T), length.out = 2 + 1)
bins
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
source("~/Dropbox/cursos2/cuanti/cse/shinyCuanti/cuanti_theme.r")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
?shinyjs::toggle
?conditionalPanel
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(tidyverse)
library(readxl)
endis = read_xlsx("../data/endis/cse_endis_informante_subset.xlsx")
diccionario = read_xlsx("../data/endis/cse_diccionario_endis_2018.xlsx")
endis
colnames(endis)
diccionario = read_tsv("../data/endis/dict_endis.tsv")
diccionario
diccionario = read_tsv("../data/endis/dict_endis.tsv",col_names = F)
colnames(endis)
diccionario
colnames(diccionario)=c("var","label")
attributes(endis$PERNRO)$label
attributes(endis$PERNRO)$label="a"
attributes(endis$PERNRO)$label
colnames(endis)
walk(diccinario,~.x)
walk(diccionario,~.x)
walk(diccionario,~print(.x$var))
pwalk(diccionario,~print(..1))
pwalk(diccionario,~print(..2))
?attr
pwalk(diccionario,~attr(end[[..1]]) <- ..2 )
pwalk(diccionario,~attr(end[[..1]])$label <- ..2 )
pwalk(diccionario,~attr(end[[..1]],"label") <- ..2 )
pwalk(diccionario,~attr(end[[..1]],"label") <- ..2 )
pwalk(diccionario,~attr(end[[..1]],"label") <<- ..2 )
pwalk(diccionario,~attr(endis[[..1]],"label") <- ..2 )
pwalk(diccionario,~attr(endis[[..1]],"label") <<- ..2 )
diccionario
pwalk(diccionario,~attr(endis[[var]],"label") <<- label )
walk2(diccionario$var,diccionario$label,~attr(endis[[.x]],"label") <- .y )
walk2(diccionario$var,diccionario$label, ~ attr(endis[[.x]],"label") <<- y )
walk2(diccionario$var,diccionario$label, ~ attr(endis[[.x]],"label") <<- y )
endis
walk2(diccionario$var,diccionario$label, ~ attr(endis[[.x]],"label") <<- y )
walk2(diccionario$var,diccionario$label, ~ attr(endis[[.x]],"label") <- y )
walk2(diccionario$var,diccionario$label, ~ attr(endis[[.x]],"label") <- .y )
walk2(diccionario$var,diccionario$label, ~ attr(endis[[..x]],"label") <- ..y )
add_labels <- function(df, var_names, labels) {
walk2(var_names, labels, ~ attr(df[[.x]], "label") <<- .y)
df
}
endis <- add_labels(endis, diccionario$var, diccionario$label)
walk2(var_names, labels, function(x,y) {
attr(endis$x,"label") <- y
})
walk2(diccionario$var, diccionario$label, function(x,y) {
attr(endis$x,"label") <- y
})
walk2(diccionario$var, diccionario$label, function(x,y) {
attr(endis$x,"label") <- y
})
?walk2
walk2(diccionario$var, diccionario$label, ~function(x,y) {
attr(endis$x,"label") <- y
})
attr(endis$PC1_NE_1,"label")
walk2(diccionario$var, diccionario$label, ~function(x,y) {
attr(endis$x,"label") <<- y
})
attr(endis$PC1_NE_1,"label")
endis <- add_labels(endis, diccionario$var, diccionario$label)
add_labels <- function(df, diccionario) {
for (i in seq_along(diccionario$var)) {
col <- diccionario$var[i]
label <- diccionario$etiqueta[i]
attr(df[[col]], "label") <- label
}
df
}
end <- add_labels(end, diccionario)
end <- add_labels(endis, diccionario)
end
View(end)
attr(end$PERNRO,"label")
add_labels <- function(df, diccionario) {
for (i in seq_along(diccionario$var)) {
col <- diccionario$var[i]
label <- diccionario$etiqueta[i]
attributes(df[[col]])$label <- label
}
df
}
end <- add_labels(endis, diccionario)
attr(end$PERNRO,"label")
add_labels <- function(df, diccionario) {
for (i in seq_along(diccionario$var)) {
col <- diccionario$var[i]
label <- diccionario$etiqueta[i]
attributes(df[[col]])$label <- label
df[[col()]]
}
df
}
end <- add_labels(endis, diccionario)
add_labels <- function(df, diccionario) {
for (i in seq_along(diccionario$var)) {
col <- diccionario$var[i]
label <- diccionario$etiqueta[i]
attributes(df[[col]])$label <- label
df[[col()]]
}
df
}
end <- add_labels(endis, diccionario)
attr(end$PERNRO,"label")
warnings()
add_labels <- function(df, diccionario) {
for (i in seq_along(diccionario$var)) {
col <- diccionario$var[i]
label <- diccionario$label[i]
attributes(df[[col]])$label <- label
}
df
}
end <- add_labels(endis, diccionario)
attr(end$PERNRO,"label")
endis <- add_labels(endis, diccionario)
attr(end$PERNRO,"label")
attr(endis$PERNRO,"label")
endis |>
mutate(across(starts_with("AP",~niveles_ap[.x])))
?across
niveles_ap[1]
niveles_ap[[1]]
niveles_ap  = list("Muy en desacuerdo","Ligeramente en desacuerdo","Ni en desacuerdo ni de acuerdo","Ligeramente de acuerdo","Muy de acuerdo")
niveles_ap[[1]]
niveles_ap[1]
endis |>
mutate(across(starts_with("AP",~niveles_ap[[.x]])))
endis |>
mutate(across(starts_with("AP"),
~ factor(.x, levels = 1:5, labels = niveles_ap)))
endis |>
mutate(across(starts_with("AP"),
~ factor(.x, levels = 1:5, labels = niveles_ap))) |> View()
niveles_bs = list("Si","No")
niveles_pc = list("Si","No","Ns/Nc")
endis |>
mutate(across(starts_with("AP"),
~ factor(.x, levels = 1:5, labels = niveles_ap))) |>
mutate(across(starts_with("BS"),
~ factor(.x, levels = 1:2, labels = niveles_bs))) |>
mutate(across(starts_with("PC"),
~ factor(.x, levels = 1:3, labels = niveles_pc))) |> View()
endis |>
mutate(across(starts_with("AP"),
~ factor(.x, levels = 1:5, labels = niveles_ap))) |>
mutate(across(starts_with("BS"),
~ factor(.x, levels = 1:2, labels = niveles_bs))) |>
mutate(across(starts_with("PC"),
~ factor(.x, levels = c(1,2,99), labels = niveles_pc))) |> View()
endis |>
mutate(across(starts_with("AP"),
~ factor(.x, levels = 1:5, labels = niveles_ap))) |>
mutate(across(starts_with("BS"),
~ factor(.x, levels = 1:2, labels = niveles_bs))) |>
mutate(across(starts_with("PC"),
~ factor(.x, levels = c(1,2,99), labels = niveles_pc))) |>
drop_na() |> View()
source("~/Dropbox/cursos2/cuanti/cse/shinyCuanti/dataCode/endis.r", echo=TRUE)
runApp()
attr(endis$PERNRO,"label")
attr(endis$Formulario,"label")
attr(endis$PC1_NE_3,"label")
diccionario$var
end <- add_labels(endis, diccionario)
View(end)
View(endis)
endis <- add_labels(endis, diccionario)
attr(endis$PC1_NE_3,"label")
save(endis,file="./data/endis.RData",version=2)
runApp()
View(endis)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
packageVersion("shiny")
sessionInfo()
runApp('test.R')
runApp('test.R')
sessionInfo()
packageVersion("shiny")
install.packages("shiny")
packageVersion("shiny")
library(shiny); runApp('test.R')
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
